<!-- pages/home/home.wxml - ä¿®å¤ç‰ˆï¼šç§»é™¤ç•™è¨€ï¼Œä¼˜åŒ–æªè¾ -->
<view class="home-page {{isPatient ? 'patient-theme' : 'caregiver-theme'}}">
  <view wx:if="{{loading}}" class="loading-center">åŠ è½½ä¸­...</view>

  <view wx:else>
    <!-- é¡¶éƒ¨é—®å€™ -->
    <view class="greeting">
      <text class="greeting-text">{{isPatient ? 'ä»Šå¤©è¾›è‹¦äº†' : ('ä½ å¥½ï¼Œ' + nickname)}}</text>
      <text class="greeting-sub" wx:if="{{cycleNo > 0}}">
        ç¬¬{{cycleNo}}ç–—ç¨‹ Â· Day {{cycleDay}}
      </text>
    </view>

    <!-- ç–—ç¨‹æç¤º -->
    <view class="cycle-hint" wx:if="{{cycleDayLabel}}">
      <text>{{cycleDayLabel}}</text>
    </view>

    <!-- ä»Šæ—¥çŠ¶æ€å¡ç‰‡ -->
    <view class="card status-card">
      <text class="status-emoji">{{statusEmoji}}</text>
      <text class="status-text">{{statusText}}</text>

      <view wx:if="{{!hasRecorded}}" class="action-btns">
        <button class="btn-primary" bindtap="goRecord">ğŸ“ å¼€å§‹è®°å½•</button>
        <button class="btn-quick" bindtap="goQuickRecord" wx:if="{{isPatient}}">
          âš¡ å¿«é€Ÿè®°å½•ï¼ˆåªå¡«ä½“æ¸©ï¼‰
        </button>
      </view>

      <view wx:else class="recorded-info">
        <view class="info-grid" wx:if="{{todayLog}}">
          <view class="info-item" wx:if="{{todayLog.energy != null}}">
            <text class="info-icon">ğŸ’ª</text>
            <text class="info-value">{{isPatient ? '' : (todayLog.energy + '/4')}}</text>
            <text class="info-label">ä½“åŠ›</text>
          </view>
          <view class="info-item" wx:if="{{todayLog.nausea != null}}">
            <text class="info-icon">ğŸ¤¢</text>
            <text class="info-value">{{isPatient ? '' : (todayLog.nausea + '/3')}}</text>
            <text class="info-label">æ¶å¿ƒ</text>
          </view>
          <view class="info-item" wx:if="{{todayLog.stool_count != null}}">
            <text class="info-icon">ğŸš½</text>
            <text class="info-value">{{todayLog.stool_count}}æ¬¡</text>
            <text class="info-label">æ’ä¾¿</text>
          </view>
          <view class="info-item" wx:if="{{todayLog.fever}}">
            <text class="info-icon">ğŸŒ¡ï¸</text>
            <text class="info-value">{{todayLog.temp_c}}â„ƒ</text>
            <text class="info-label">ä½“æ¸©</text>
          </view>
        </view>
        <button class="btn-outline modify-btn" bindtap="goRecord">ä¿®æ”¹è®°å½•</button>
      </view>
    </view>

    <!-- æ‚£è€…ï¼šæ’ä¾¿æµ®åŠ¨æŒ‰é’® -->
    <view wx:if="{{isPatient}}" class="fab" bindtap="goStool">
      <text>ğŸš½</text>
    </view>

    <!-- å®¶å±ï¼šå¿«æ·å…¥å£ -->
    <view wx:if="{{!isPatient}}" class="quick-actions">
      <view class="quick-item" bindtap="goSummary">
        <text class="quick-icon">ğŸ“‹</text>
        <text class="quick-label">å°±è¯Šæ‘˜è¦</text>
      </view>
      <view class="quick-item" bindtap="goRecord">
        <text class="quick-icon">âœï¸</text>
        <text class="quick-label">ä»£å¡«è®°å½•</text>
      </view>
    </view>

    <!-- ç•™è¨€æ¿æš‚æ—¶ä¸æ˜¾ç¤ºï¼ŒV2å†åš -->
  </view>
</view>
