<!-- pages/summary/summary.wxml -->
<view class="summary-page">
  <view wx:if="{{loading}}" class="loading-center">ç”Ÿæˆæ‘˜è¦ä¸­...</view>

  <view wx:else>
    <!-- å…³é”®æŒ‡æ ‡ -->
    <view class="card stats-card" wx:if="{{keyStats && !isPatient}}">
      <text class="section-title">ğŸ“Š å…³é”®æŒ‡æ ‡</text>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{keyStats.max_nausea != null ? keyStats.max_nausea : '-'}}/3</text>
          <text class="stat-label">æ¶å¿ƒå³°å€¼</text>
          <text class="stat-day" wx:if="{{keyStats.max_nausea_day}}">Day {{keyStats.max_nausea_day}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{keyStats.min_energy != null ? keyStats.min_energy : '-'}}/4</text>
          <text class="stat-label">ä½“åŠ›æœ€ä½</text>
          <text class="stat-day" wx:if="{{keyStats.min_energy_day}}">Day {{keyStats.min_energy_day}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{keyStats.max_stool != null ? keyStats.max_stool : '-'}}</text>
          <text class="stat-label">æ’ä¾¿æœ€å¤š</text>
          <text class="stat-day" wx:if="{{keyStats.max_stool_day}}">Day {{keyStats.max_stool_day}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{keyStats.fever_count || 0}}</text>
          <text class="stat-label">å‘çƒ­æ¬¡æ•°</text>
        </view>
      </view>
    </view>

    <!-- æ‘˜è¦æ–‡æœ¬ -->
    <view class="card text-card">
      <text class="section-title">{{isPatient ? 'ğŸ“‹ æˆ‘çš„è®°å½•' : 'ğŸ“‹ å°±è¯Šæ‘˜è¦'}}</text>
      <text class="summary-text" selectable="{{true}}">{{summaryText}}</text>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="btn-row" wx:if="{{!isPatient}}">
      <button class="btn-primary" bindtap="onCopy">ğŸ“‹ å¤åˆ¶æ‘˜è¦</button>
      <button class="btn-outline share-btn" open-type="share">ğŸ“¤ åˆ†äº«ç»™åŒ»ç”Ÿ</button>
    </view>
  </view>
</view>
